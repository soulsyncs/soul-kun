# ============================================================
# Soul-kun 環境変数テンプレート
# ============================================================
# このファイルを `.env` にコピーして使用してください。
# `.env` ファイルは .gitignore に含めてください（機密情報保護）。
#
# 本番環境では:
# - シークレット類は GCP Secret Manager に保存
# - 環境変数は env-vars.yaml で管理
# ============================================================

# ------------------------------------------------------------
# GCP プロジェクト設定
# ------------------------------------------------------------
PROJECT_ID=soulkun-production
INSTANCE_CONNECTION_NAME=soulkun-production:asia-northeast1:soulkun-db

# 環境識別
# development | staging | production
ENVIRONMENT=development
DEBUG=true

# ------------------------------------------------------------
# データベース (Cloud SQL)
# ------------------------------------------------------------
DB_NAME=soulkun_tasks
DB_USER=soulkun_user

# ローカル開発時のみ設定（Cloud Runでは Cloud SQL Connector を使用）
DB_HOST=localhost
DB_PORT=5432

# コネクションプール設定
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=2
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# ------------------------------------------------------------
# シークレット（ローカル開発用）
# ------------------------------------------------------------
# 本番環境では GCP Secret Manager から取得
# ローカル開発時は以下の環境変数を設定

# DBパスワード
SOULKUN_DB_PASSWORD=your_database_password_here

# Gemini API（LLM応答 + Embedding）
# ★ v10.12.0: OpenAI不要、Gemini APIに統一
GOOGLE_AI_API_KEY=your-google-ai-api-key-here

# Pinecone API（ベクターDB）
PINECONE_API_KEY=your-pinecone-api-key-here

# Chatwork API
CHATWORK_API_KEY=your-chatwork-api-key-here

# OpenRouter API（AI応答機能、Gemini 3 Flash経由）
OPENROUTER_API_KEY=your-openrouter-api-key-here

# Google API（サービスアカウント）
# JSONキーファイルのパスまたは内容
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# ------------------------------------------------------------
# OpenRouter (AI応答機能)
# ------------------------------------------------------------
OPENROUTER_API_URL=https://openrouter.ai/api/v1/chat/completions
# ★ v10.12.0: Gemini 3 Flashに統一
DEFAULT_AI_MODEL=google/gemini-3-flash-preview
COMMANDER_AI_MODEL=google/gemini-3-flash-preview

# ------------------------------------------------------------
# Chatwork設定
# ------------------------------------------------------------
CHATWORK_API_RATE_LIMIT=100
MY_ACCOUNT_ID=7399137
BOT_ACCOUNT_ID=7399137

# ------------------------------------------------------------
# 会話履歴設定
# ------------------------------------------------------------
MAX_HISTORY_COUNT=100
HISTORY_EXPIRY_HOURS=720

# ------------------------------------------------------------
# Redis キャッシュ（Phase 4準備）
# ------------------------------------------------------------
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_TTL_SECONDS=300

# ------------------------------------------------------------
# Phase 3: Pinecone ベクターDB
# ------------------------------------------------------------
PINECONE_INDEX_NAME=soulkun-knowledge

# ------------------------------------------------------------
# Phase 3: ナレッジ検索設定
# ------------------------------------------------------------
KNOWLEDGE_SEARCH_TOP_K=5
KNOWLEDGE_SEARCH_SCORE_THRESHOLD=0.7
KNOWLEDGE_REFUSE_ON_LOW_SCORE=true

# ------------------------------------------------------------
# Phase 3.5: 組織階層連携
# ------------------------------------------------------------
# true: 部署ベースのアクセス制御を有効化（departments テーブル必須）
# false: 機密区分（classification）のみでアクセス制御（Phase 3 単独運用）
ENABLE_DEPARTMENT_ACCESS_CONTROL=false

# ------------------------------------------------------------
# Phase 3: Googleドライブ監視（watch-google-drive 用）
# ------------------------------------------------------------
ORGANIZATION_ID=org_soulsyncs
ROOT_FOLDER_ID=your-google-drive-folder-id-here
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# ------------------------------------------------------------
# API/CORS設定
# ------------------------------------------------------------
API_VERSION=v1
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# ============================================================
# Cloud Functions / Cloud Run 自動設定（設定不要）
# ============================================================
# K_SERVICE: Cloud Run のサービス名（自動設定）
# FUNCTION_NAME: Cloud Functions の関数名（自動設定）
