# 第1章：全体方針

## Document Contract（SoT宣言）

| 項目 | 内容 |
|------|------|
| **この文書の役割** | ソウルシンクスの哲学・原則・MVVを定義 |
| **書くこと** | 哲学、使命、MVV、設計の5原則の背景・詳細 |
| **書かないこと** | 脳の鉄則（→CLAUDE.md）、実装詳細（→25章）|
| **SoT（この文書が正）** | 哲学・原則の背景と詳細説明 |
| **Owner** | カズさん（代表） |
| **更新トリガー** | 経営方針・哲学の変更時 |
| **関連リンク** | [CLAUDE.md](../CLAUDE.md)、[25章](25_llm_native_brain_architecture.md) |

---

## 1.1 ソウルシンクスの哲学

### ■ 本質的な提案価値

ソウルシンクスが提供するのは、単なる「業務効率化ツール」ではない。

**【表面的な価値】**
「属人化・教育・漏れを解消するAI」

**【本質的な価値（ソウルシンクスの哲学）】**

1. **テクノロジーで解決できることは全部テクノロジーでやる**
   - ヒューマンエラーが起きない
   - 品質が安定する
   - 24時間365日稼働する

2. **BCP（事業継続）の観点**
   - 属人化は会社のリスク
   - 誰かがいなくても止まらない仕組み
   - AIシステムにナレッジが蓄積される

3. **人にしかできないことに人が集中する**
   - 温もり、ホスピタリティ、思いを形にすること
   - お客様への丁寧な対応
   - 部下の成長を支える1on1
   - 新しいサービスのアイデアを考える時間
   - チームの雰囲気を良くするコミュニケーション

4. **少子化・採用難の時代への対応**
   - いい人を採用するのは難しい
   - だったら、必要な人数が少なくて済む状態を先に作る
   - 作業に追われる人を減らし、価値を生む人を増やす

5. **地方の中小企業を救う**
   - 採用に困っている会社にとって、非常にありがたい存在になる
   - テクノロジーと共存することで、少ない人数で高いパフォーマンスを発揮

### ■ ソウルくんの使命

> 「人でなくてもできることは全部テクノロジーに任せ、
>  人にしかできないことに人が集中できる状態を作る」

これがソウルくんの使命であり、ソウルシンクスが顧客に提供する本質的な価値である。

### ■ v10.0で追加される価値【新設】

> **「組織構造を理解するAIが、最適なセキュリティを自動提供する」**

**従来の課題:**
- 手動で「この人はこの情報を見れる」を設定していた
- 組織変更のたびに権限設定を変更する必要があった
- 設定ミスで情報漏洩のリスクがあった

**v10.0で実現すること:**
- **組織図システムと連携し、AIが組織構造を理解**
- **「部長は部署全体、一般社員は自部署のみ」を自動判定**
- **人事異動があっても、権限設定は自動で変わる**

これにより、**「組織管理 + AIバックオフィス」のセット販売**が可能になる。

---

## 1.2 設計原則

### ■ 5つの設計原則

| # | 原則 | 説明 | 具体例 |
|---|------|------|--------|
| 1 | **社内実証優先** | 社内で価値を実証してからBPaaSに展開 | Phase 3を社内で完成させてから顧客提供 |
| 2 | **脳みそ先行** | 機能（手足）より先に判断軸（脳みそ）を作る | ナレッジ系を経理系より先に実装 |
| 3 | **社内工数削減優先** | 外注で回っている業務より、社内工数を使っている業務を先に自動化 | 人事系を経理系より先に実装 |
| 4 | **MVP先行** | 完璧を目指さず、最小限の価値を早く届ける | Phase 3はQ2でMVP、Q3以降で拡張 |
| 5 | **参照＋根拠提示** | AIは断定せず、根拠を示して参照させる | 就業規則の回答には出典と注意書きを付ける |
| **6** | **組織理解＋自動制御**【v10.0追加】 | 組織構造を理解し、アクセス制御を自動化 | 部長異動で権限が自動変更 |

### ■ 技術設計原則

| # | 原則 | 説明 |
|---|------|------|
| 1 | **依存関係の最小化** | 並行開発できる単位でPhaseを切る |
| 2 | **単一責任の原則** | 1 Phaseに1つの「業務領域」 |
| 3 | **既存資産の最大活用** | 今あるコード（タスク検知、定期ジョブ）を拡張 |
| 4 | **DBテーブルの共有** | 同じテーブルを使う機能は同じPhaseに |
| 5 | **外部API連携の集約** | 同じAPIを使う機能はまとめる |
| **6** | **組織モデルの一元管理**【v10.0追加】 | 組織構造は単一のテーブルで管理し、全機能で共有 |
| **7** | **テナント識別子の一元管理**【v10.1追加】 | tenant_id = organization_id（同義）。Phase 4Aでorganization_idに統一予定 |

---

## 1.3 RAG設計原則

### ■ RAG設計の3原則

| # | 原則 | 説明 | 理由 |
|---|------|------|------|
| 1 | **検索と生成の責務分離** | 検索結果が薄いなら生成しない。生成は根拠の範囲内 | 機能が増えるほど「賢く答えさせたくなる誘惑」が増える。設計思想で縛る |
| 2 | **機密区分の早期設計** | Q2 MVPの時点から機密区分（public/internal/confidential/restricted）を持つ | 後で機密区分を付け直すのが一番だるい |
| 3 | **ナレッジ閲覧の監査** | 「誰が何を見たか」をaudit_logsに含める | 顧客情報や人事情報を扱う未来での必須要件 |
| **4** | **組織階層の動的制御**【v10.0追加】 | アクセス権限は組織階層から動的に計算。固定権限は使わない | 人事異動のたびに権限設定を変えるのは破綻する |

### ■ 機密区分の定義

| 区分 | 説明 | 例 | アクセス権 |
|------|------|-----|-----------|
| **public** | 社外にも公開可能 | 会社概要、サービス紹介 | 全員 |
| **internal** | 社員なら誰でも閲覧可 | 業務マニュアル、MVV | 全社員 |
| **confidential** | 部門/役職で閲覧制限 | 就業規則の詳細、評価基準 | **組織階層で判定【v10.0】** |
| **restricted** | 経営陣のみ | 財務情報、M&A情報 | 経営陣のみ |

### ■ v10.0での機密区分の拡張【新設】

**confidential（部門限定）の判定方法:**

```
従来（v9.2まで）:
- 固定の役職（manager以上）で判定
- 問題点: 「営業部長」が「総務部の機密情報」を見れてしまう

v10.0から:
- 組織階層で動的に判定
- 「営業部長」は「営業部とその配下」のみアクセス可能
- 「総務部の機密情報」は見れない
```

**実装イメージ:**

```python
# v9.2まで（固定権限）
if user.role == "manager":
    allow_access(document)  # ❌ すべての機密情報を見れてしまう

# v10.0から（動的権限）
accessible_depts = compute_accessible_departments(user)
if document.department_id in accessible_depts:
    allow_access(document)  # ✅ 自部署の機密情報のみ
```

---

## 1.4 v10.0での主要変更点【新設】

### ■ v9.2 → v10.0 の変更サマリー

| 項目 | v9.2 | v10.0（変更後） | 変更理由 |
|------|------|----------------|---------|
| **Phase構成** | Phase 3 → Phase B7 | Phase 3 → 3.5 → 3.6 → B7 | 組織図連携を段階的に実装 |
| **組織階層モデル** | 未定義 | 完全定義 | 階層ベースのアクセス制御に必須 |
| **組織図システム** | 外部システム | 製品として統合 | BPaaSのセット販売を実現 |
| **機密区分判定** | 固定権限 | 動的判定（組織階層ベース） | 人事異動に自動対応 |
| **API設計** | 概要のみ | 完全定義 | 実装可能レベルまで詳細化 |
| **テスト設計** | 未定義 | 完全定義 | 品質担保のため |
| **実装手順書** | 未定義 | 完全定義 | エンジニアが迷わないため |

### ■ 追加されるPhase

| Phase | 名称 | 目的 | 実装時期 |
|-------|------|------|---------|
| **Phase 3.5** | 組織階層連携 | RAG × 組織図の統合 | Q2（Week 7-8） |
| **Phase 3.6** | 組織図システム製品化 | 外販可能にする | Q2〜Q3 |

### ■ 追加されるテーブル（8テーブル）

| # | テーブル名 | 目的 |
|---|-----------|------|
| 1 | departments | 部署マスタ |
| 2 | user_departments | ユーザーの所属部署 |
| 3 | department_access_scopes | 部署ごとの権限スコープ |
| 4 | org_chart_sync_logs | 組織図同期ログ |
| 5 | department_hierarchies | 部署階層の事前計算テーブル |
| 6 | org_chart_templates | 組織図テンプレート |
| 7 | org_chart_export_logs | 組織図エクスポートログ |
| 8 | org_chart_api_keys | 組織図API認証 |

---


---

**[📁 目次に戻る](00_README.md)**
