# org-chart ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­è¨ˆæ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0.0
**ä½œæˆæ—¥**: 2026-01-25
**æœ€çµ‚æ›´æ–°**: 2026-01-25 14:30 JST
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Phase 1å®Œäº† âœ… / Phase 2-6 è¨ˆç”»ç¢ºå®š

---

## Document Contractï¼ˆSoTå®£è¨€ï¼‰

| é …ç›® | å†…å®¹ |
|------|------|
| **ã“ã®æ–‡æ›¸ã®å½¹å‰²** | org-chartï¼ˆçµ„ç¹”å›³ç®¡ç†Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­è¨ˆæ›¸ |
| **æ›¸ãã“ã¨** | ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆã€æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã€Supabaseãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆï¼ˆemployees/departments/roles/change_historyï¼‰ã€æ©Ÿèƒ½ä¸€è¦§ã€ã‚½ã‚¦ãƒ«ãã‚“é€£æºï¼ˆåŒæœŸAPIä»•æ§˜ï¼‰ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ”¹ä¿®è¨ˆç”» |
| **æ›¸ã‹ãªã„ã“ã¨** | ã‚½ã‚¦ãƒ«ãã‚“å´ã®æ¨©é™ç®¡ç†è¨­è¨ˆï¼ˆâ†’PHASE_3-5_DETAILED_DESIGN.mdï¼‰ã€Cloud SQLå´ã®ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆï¼ˆâ†’03_database_design.mdï¼‰ |
| **SoTï¼ˆã“ã®æ–‡æ›¸ãŒæ­£ï¼‰** | Supabaseã®employees/departments/rolesãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã€org-chartã®æ©Ÿèƒ½ä¸€è¦§ãƒ»å®Ÿè£…çŠ¶æ³ã€ã‚½ã‚¦ãƒ«ãã‚“APIã¨ã®åŒæœŸãƒªã‚¯ã‚¨ã‚¹ãƒˆå½¢å¼ã€è¿½åŠ ãŒå¿…è¦ãªæ©Ÿèƒ½ãƒªã‚¹ãƒˆ |
| **Owner** | Tech Lead |
| **æ›´æ–°ãƒˆãƒªã‚¬ãƒ¼** | Supabaseã‚¹ã‚­ãƒ¼ãƒã®å¤‰æ›´ã€æ–°æ©Ÿèƒ½ã®è¿½åŠ ã€åŒæœŸAPIä»•æ§˜ã®å¤‰æ›´ |

---

## 1. æ¦‚è¦

### 1.1 ã‚·ã‚¹ãƒ†ãƒ ã®ä½ç½®ã¥ã‘

org-chartã¯ã€ã‚½ã‚¦ãƒ«ã‚·ãƒ³ã‚¯ã‚¹ç¤¾å†…ã®çµ„ç¹”å›³ã‚’ç®¡ç†ã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚
ã‚½ã‚¦ãƒ«ãã‚“ï¼ˆAIãƒãƒƒã‚¯ã‚ªãƒ•ã‚£ã‚¹ã‚·ã‚¹ãƒ†ãƒ ï¼‰ã¨é€£æºã—ã€æ¨©é™ç®¡ç†ãƒ»ã‚¿ã‚¹ã‚¯é€šçŸ¥ã®åŸºç›¤ã¨ãªã‚‹ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ãƒ¦ãƒ¼ã‚¶ãƒ¼                                â”‚
â”‚                         â”‚                                   â”‚
â”‚                         â–¼                                   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚              â”‚   org-chart Web     â”‚ â† æœ¬è¨­è¨ˆæ›¸ã®å¯¾è±¡       â”‚
â”‚              â”‚  (é™çš„HTML/JS)      â”‚                        â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                         â”‚                                   â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚           â–¼             â–¼             â–¼                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚ Supabase  â”‚ â”‚ Chatwork  â”‚ â”‚ ã‚½ã‚¦ãƒ«ãã‚“API â”‚           â”‚
â”‚    â”‚ (ãƒ‡ãƒ¼ã‚¿)  â”‚ â”‚ (é€šçŸ¥)    â”‚ â”‚ (åŒæœŸ)        â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                        â”‚                    â”‚
â”‚                                        â–¼                    â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                               â”‚  Cloud SQL    â”‚             â”‚
â”‚                               â”‚ (æœ¬ç•ªãƒ‡ãƒ¼ã‚¿)  â”‚             â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| é …ç›® | æŠ€è¡“ | å‚™è€ƒ |
|------|------|------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | HTML5 + Tailwind CSS + Vanilla JS | ãƒ“ãƒ«ãƒ‰ä¸è¦ã®é™çš„ã‚µã‚¤ãƒˆ |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | Supabase (PostgreSQL) | REST APIçµŒç”± |
| ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | Cloudflare Pages | ç„¡æ–™æ ã§é‹ç”¨ |
| é€šçŸ¥é€£æº | Chatwork API | çµ„ç¹”å¤‰æ›´é€šçŸ¥ |
| åŒæœŸå…ˆ | ã‚½ã‚¦ãƒ«ãã‚“API (Cloud Run) | Phase 3.5 ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ |

### 1.3 ãƒªãƒã‚¸ãƒˆãƒª

```
/Users/kikubookair/Desktop/org-chart/
â”œâ”€â”€ index.html          # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ï¼ˆ1,595è¡Œï¼‰
â”œâ”€â”€ js/
â”‚   â””â”€â”€ app.js          # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç´„3,700è¡Œï¼‰
â”œâ”€â”€ images/             # ãƒ­ã‚´ç­‰
â”œâ”€â”€ .env                # ç’°å¢ƒå¤‰æ•°ï¼ˆæ©Ÿå¯†ï¼‰
â””â”€â”€ deploy.sh           # ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

---

## 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆSupabaseï¼‰

### 2.1 employees ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å | å‹ | NULL | èª¬æ˜ | ã‚½ã‚¦ãƒ«ãã‚“é€£æº |
|----------|-----|------|------|----------------|
| id | UUID | NO | ä¸»ã‚­ãƒ¼ | âœ… å¿…é ˆ |
| name | VARCHAR(255) | NO | æ°å | âœ… å¿…é ˆ |
| department_id | UUID | NO | ä¸»æ‰€å±éƒ¨ç½²ID | âœ… å¿…é ˆ |
| departments | JSONB | YES | å…¼å‹™éƒ¨ç½²ãƒªã‚¹ãƒˆ | âœ… ä½¿ç”¨ |
| position | VARCHAR(100) | YES | å½¹è·åï¼ˆå¾Œæ–¹äº’æ›ï¼‰ | âš ï¸ éæ¨å¥¨ |
| **role_id** | VARCHAR(50) | YES | å½¹è·IDï¼ˆä¾‹: role_ceoï¼‰ | âœ… **å¿…é ˆ** |
| employment_type | VARCHAR(50) | NO | é›‡ç”¨å½¢æ…‹ï¼ˆç¤¾å“¡/æ¥­å‹™å§”è¨—/ãƒ‘ãƒ¼ãƒˆï¼‰ | âœ… ä½¿ç”¨ |
| is_active | BOOLEAN | NO | åœ¨ç±ä¸­ãƒ•ãƒ©ã‚° | âœ… ä½¿ç”¨ |
| **chatwork_account_id** | VARCHAR(20) | YES | ChatWorkã‚¢ã‚«ã‚¦ãƒ³ãƒˆID | âœ… **å¿…é ˆï¼ˆæ–°è¦ï¼‰** |
| email_company | VARCHAR(255) | YES | ä¼šç¤¾ãƒ¡ãƒ¼ãƒ« | â—‹ å‚è€ƒ |
| email_gmail | VARCHAR(255) | YES | Gmailã‚¢ã‚«ã‚¦ãƒ³ãƒˆ | â—‹ å‚è€ƒ |
| email_shared | VARCHAR(255) | YES | å…±æœ‰ãƒ¡ãƒ¼ãƒ« | - |
| phone | VARCHAR(20) | YES | é›»è©±ç•ªå· | - |
| birthday | DATE | YES | èª•ç”Ÿæ—¥ | - |
| avatar | TEXT | YES | ã‚¢ãƒã‚¿ãƒ¼ç”»åƒURL | - |
| profile_url | TEXT | YES | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«URL | - |
| skills | JSONB | YES | ã‚¹ã‚­ãƒ«ãƒªã‚¹ãƒˆ | - |
| certifications | JSONB | YES | è³‡æ ¼ãƒªã‚¹ãƒˆ | - |
| evaluation | VARCHAR(10) | YES | è©•ä¾¡ãƒ©ãƒ³ã‚¯ï¼ˆS/A/B/C/Dï¼‰ | - |
| goal_achievement | INT | YES | ç›®æ¨™é”æˆç‡ï¼ˆ%ï¼‰ | - |
| notes | TEXT | YES | å‚™è€ƒ | - |
| hire_date | DATE | YES | å…¥ç¤¾æ—¥ | â—‹ å‚è€ƒ |
| resignation_date | DATE | YES | é€€ç¤¾æ—¥ | â—‹ å‚è€ƒ |
| department_order | INT | NO | éƒ¨ç½²å†…è¡¨ç¤ºé † | - |
| created_at | TIMESTAMPTZ | NO | ä½œæˆæ—¥æ™‚ | - |
| updated_at | TIMESTAMPTZ | NO | æ›´æ–°æ—¥æ™‚ | - |

### 2.2 departments ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å | å‹ | NULL | èª¬æ˜ | ã‚½ã‚¦ãƒ«ãã‚“é€£æº |
|----------|-----|------|------|----------------|
| id | UUID | NO | ä¸»ã‚­ãƒ¼ | âœ… å¿…é ˆ |
| name | VARCHAR(255) | NO | éƒ¨ç½²å | âœ… å¿…é ˆ |
| parent_id | UUID | YES | è¦ªéƒ¨ç½²ID | âœ… å¿…é ˆ |
| **code** | VARCHAR(50) | YES | éƒ¨ç½²ã‚³ãƒ¼ãƒ‰ | âœ… **æ¨å¥¨ï¼ˆæ–°è¦ï¼‰** |
| **level** | INT | YES | éšå±¤ãƒ¬ãƒ™ãƒ« | âœ… **æ¨å¥¨ï¼ˆæ–°è¦ï¼‰** |
| **is_active** | BOOLEAN | YES | æœ‰åŠ¹ãƒ•ãƒ©ã‚° | âœ… **æ¨å¥¨ï¼ˆæ–°è¦ï¼‰** |
| sort_order | INT | NO | è¡¨ç¤ºé †åº | â—‹ å‚è€ƒ |
| description | TEXT | YES | èª¬æ˜ | - |
| created_at | TIMESTAMPTZ | NO | ä½œæˆæ—¥æ™‚ | - |
| updated_at | TIMESTAMPTZ | NO | æ›´æ–°æ—¥æ™‚ | - |

### 2.3 roles ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆPhase 3.5ã§è¿½åŠ æ¸ˆã¿ï¼‰

| ã‚«ãƒ©ãƒ å | å‹ | NULL | èª¬æ˜ |
|----------|-----|------|------|
| id | VARCHAR(50) | NO | å½¹è·IDï¼ˆä¾‹: role_ceoï¼‰ |
| name | VARCHAR(100) | NO | å½¹è·å |
| level | INT | NO | æ¨©é™ãƒ¬ãƒ™ãƒ«ï¼ˆ1-6ï¼‰ |
| description | TEXT | YES | èª¬æ˜ |
| display_order | INT | NO | è¡¨ç¤ºé †åº |
| is_active | BOOLEAN | NO | æœ‰åŠ¹ãƒ•ãƒ©ã‚° |
| created_at | TIMESTAMPTZ | NO | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | NO | æ›´æ–°æ—¥æ™‚ |

**æ¨©é™ãƒ¬ãƒ™ãƒ«å®šç¾©**:

| level | åç§° | ã‚¢ã‚¯ã‚»ã‚¹ç¯„å›² |
|-------|------|-------------|
| 1 | æ¥­å‹™å§”è¨— | è‡ªéƒ¨ç½²ã®ã¿ï¼ˆåˆ¶é™ã‚ã‚Šï¼‰ |
| 2 | ä¸€èˆ¬ç¤¾å“¡ | è‡ªéƒ¨ç½²ã®ã¿ |
| 3 | ãƒªãƒ¼ãƒ€ãƒ¼/èª²é•· | è‡ªéƒ¨ç½² + ç›´ä¸‹éƒ¨ç½² |
| 4 | å¹¹éƒ¨/éƒ¨é•· | è‡ªéƒ¨ç½² + é…ä¸‹å…¨éƒ¨ç½² |
| 5 | ç®¡ç†éƒ¨ | å…¨çµ„ç¹”ï¼ˆæœ€é«˜æ©Ÿå¯†é™¤ãï¼‰ |
| 6 | ä»£è¡¨/CFO | å…¨çµ„ç¹”ãƒ»å…¨æƒ…å ± |

### 2.4 change_history ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å | å‹ | NULL | èª¬æ˜ |
|----------|-----|------|------|
| id | UUID | NO | ä¸»ã‚­ãƒ¼ |
| action_type | VARCHAR(50) | NO | æ“ä½œç¨®åˆ¥ï¼ˆè¿½åŠ /ç·¨é›†/å‰Šé™¤/ç•°å‹•ï¼‰ |
| target_type | VARCHAR(50) | NO | å¯¾è±¡ç¨®åˆ¥ï¼ˆemployee/departmentï¼‰ |
| target_id | UUID | NO | å¯¾è±¡ID |
| before_data | JSONB | YES | å¤‰æ›´å‰ãƒ‡ãƒ¼ã‚¿ |
| after_data | JSONB | YES | å¤‰æ›´å¾Œãƒ‡ãƒ¼ã‚¿ |
| description | TEXT | YES | èª¬æ˜ |
| created_at | TIMESTAMPTZ | NO | ä½œæˆæ—¥æ™‚ |

---

## 3. æ©Ÿèƒ½ä¸€è¦§

### 3.1 ç¾åœ¨ã®æ©Ÿèƒ½ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

| # | æ©Ÿèƒ½ | çŠ¶æ…‹ | èª¬æ˜ |
|---|------|------|------|
| 1 | ç¤¾å“¡CRUD | âœ… å®Œäº† | è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ |
| 2 | éƒ¨ç½²CRUD | âœ… å®Œäº† | è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ |
| 3 | ç•°å‹•æ©Ÿèƒ½ | âœ… å®Œäº† | éƒ¨ç½²é–“ã®ç¤¾å“¡ç§»å‹• |
| 4 | è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ | âœ… å®Œäº† | ã‚«ãƒ¼ãƒ‰/ãƒ„ãƒªãƒ¼/ãƒªã‚¹ãƒˆ |
| 5 | æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ | âœ… å®Œäº† | åå‰ãƒ»éƒ¨ç½²ãƒ»é›‡ç”¨å½¢æ…‹ãƒ»ã‚¹ã‚­ãƒ« |
| 6 | å¤‰æ›´å±¥æ­´ | âœ… å®Œäº† | æ“ä½œãƒ­ã‚°ã®è¨˜éŒ²ãƒ»è¡¨ç¤º |
| 7 | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | âœ… å®Œäº† | JSON/CSV/PDF |
| 8 | ã‚¤ãƒ³ãƒãƒ¼ãƒˆ | âœ… å®Œäº† | JSON/CSV/Excel |
| 9 | é–²è¦§å°‚ç”¨URL | âœ… å®Œäº† | ?mode=view ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |
| 10 | Chatworké€šçŸ¥ | âœ… å®Œäº† | çµ„ç¹”å¤‰æ›´æ™‚ã®é€šçŸ¥ |
| 11 | ã‚½ã‚¦ãƒ«ãã‚“åŒæœŸ | âš ï¸ è¦ä¿®æ­£ | APIã®URLé–“é•ã„ |
| 12 | å½¹è·ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ | âœ… å®Œäº† | rolesãƒ†ãƒ¼ãƒ–ãƒ«é€£æº |
| 13 | ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ— | âœ… å®Œäº† | éƒ¨ç½²å†…ã®é †ç•ªå¤‰æ›´ |

### 3.2 è¿½åŠ ãŒå¿…è¦ãªæ©Ÿèƒ½

| # | æ©Ÿèƒ½ | å„ªå…ˆåº¦ | èª¬æ˜ | å·¥æ•°ç›®å®‰ |
|---|------|--------|------|----------|
| 1 | **ChatWork IDå…¥åŠ›æ¬„** | ğŸ”´ é«˜ | ç¤¾å“¡ç·¨é›†ç”»é¢ã«è¿½åŠ  | 30åˆ† |
| 2 | **åŒæœŸAPIã®URLä¿®æ­£** | ğŸ”´ é«˜ | æ­£ã—ã„URLã«ä¿®æ­£ | 5åˆ† |
| 3 | **æœªè¨­å®šé …ç›®ãƒã‚¤ãƒ©ã‚¤ãƒˆ** | ğŸŸ¡ ä¸­ | role_id/chatwork_idæœªè¨­å®šã‚’è­¦å‘Š | 30åˆ† |
| 4 | **ä¸€æ‹¬ç·¨é›†æ©Ÿèƒ½** | ğŸŸ¡ ä¸­ | è¤‡æ•°ç¤¾å“¡ã®åŒæ™‚ç·¨é›† | 2æ™‚é–“ |
| 5 | **åŒæœŸå·®åˆ†ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼** | ğŸŸ¡ ä¸­ | åŒæœŸå‰ã«å¤‰æ›´å†…å®¹ã‚’è¡¨ç¤º | 1æ™‚é–“ |
| 6 | **éƒ¨ç½²ã‚³ãƒ¼ãƒ‰å…¥åŠ›æ¬„** | ğŸŸ¢ ä½ | éƒ¨ç½²ç·¨é›†ç”»é¢ã«è¿½åŠ  | 20åˆ† |

---

## 4. ã‚½ã‚¦ãƒ«ãã‚“é€£æº

### 4.1 åŒæœŸAPI

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
```
POST https://soulkun-api-tzu7ftekzq-an.a.run.app/api/v1/organizations/{org_id}/sync-org-chart
```

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆå½¢å¼**:
```json
{
  "organization_id": "org_soulsyncs",
  "source": "org_chart_system",
  "sync_type": "full",
  "departments": [
    {
      "id": "uuid-xxx",
      "name": "å–¶æ¥­éƒ¨",
      "code": "SALES",
      "parentId": null,
      "level": 1,
      "displayOrder": 1,
      "isActive": true
    }
  ],
  "roles": [
    {
      "id": "role_ceo",
      "name": "ä»£è¡¨å–ç· å½¹",
      "level": 6,
      "description": "æœ€é«˜çµŒå–¶è²¬ä»»è€…"
    }
  ],
  "employees": [
    {
      "id": "uuid-yyy",
      "name": "å±±ç”°å¤ªéƒ",
      "email": "yamada@example.com",
      "departmentId": "uuid-xxx",
      "roleId": "role_ceo",
      "isPrimary": true,
      "startDate": "2020-04-01"
    }
  ],
  "options": {
    "dry_run": false
  }
}
```

### 4.2 åŒæœŸã«å¿…è¦ãªé …ç›®

| é …ç›® | å¿…é ˆ | Supabaseã‚«ãƒ©ãƒ  | å‚™è€ƒ |
|------|------|---------------|------|
| ç¤¾å“¡ID | âœ… | employees.id | UUID |
| ç¤¾å“¡å | âœ… | employees.name | |
| éƒ¨ç½²ID | âœ… | employees.department_id | UUID |
| å½¹è·ID | âœ… | employees.role_id | ä¾‹: role_ceo |
| ChatWork ID | âœ… | employees.chatwork_account_id | **æ–°è¦è¿½åŠ å¿…è¦** |
| ãƒ¡ãƒ¼ãƒ« | â—‹ | employees.email_company | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ |
| å…¥ç¤¾æ—¥ | â—‹ | employees.hire_date | |
| é€€ç¤¾æ—¥ | â—‹ | employees.resignation_date | |

### 4.3 ChatWorké€£æºã®ä»•çµ„ã¿

```
ã€ã‚¿ã‚¹ã‚¯ãƒªãƒã‚¤ãƒ³ãƒ‰æ™‚ã®æµã‚Œã€‘

1. ã‚½ã‚¦ãƒ«ãã‚“ãŒCloud SQLã‹ã‚‰ã‚¿ã‚¹ã‚¯æƒ…å ±ã‚’å–å¾—
2. æ‹…å½“è€…ã®user_idã‚’ç‰¹å®š
3. user_departmentsã‹ã‚‰organization_idå†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—
4. â˜… chatwork_account_idã‚’ä½¿ã£ã¦ChatWorkã«é€šçŸ¥

ã€chatwork_account_idãŒãªã„ã¨ã€‘
- èª°ã«é€šçŸ¥ã™ã‚Œã°ã„ã„ã‹åˆ†ã‹ã‚‰ãªã„
- ãƒªãƒã‚¤ãƒ³ãƒ‰ãŒé€ã‚Œãªã„
```

---

## 5. æ”¹å–„è¨ˆç”»

### 5.1 Phase 1: ç·Šæ€¥ä¿®æ­£ï¼ˆ2026-01-25 å®Œäº† âœ…ï¼‰

```
âœ… 1. Supabaseã«chatwork_account_idã‚«ãƒ©ãƒ è¿½åŠ ï¼ˆSQLå®Ÿè¡Œæ¸ˆã¿ï¼‰
âœ… 2. åŒæœŸAPIã®URLä¿®æ­£ï¼ˆapp.jsï¼‰
âœ… 3. ç¤¾å“¡ç·¨é›†ç”»é¢ã«ChatWork IDå…¥åŠ›æ¬„è¿½åŠ 
âœ… 4. ç¤¾å“¡è¿½åŠ ç”»é¢ã«ChatWork IDå…¥åŠ›æ¬„è¿½åŠ 
âœ… 5. ã‚¹ã‚­ãƒ¼ãƒãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½è¿½åŠ ï¼ˆã‚«ãƒ©ãƒ æœªå­˜åœ¨æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
```

**PR**: https://github.com/soulsyncs/org-chart/pull/3
**ãƒ‡ãƒ—ãƒ­ã‚¤**: X Server (sv10875.xserver.jp) ã«åæ˜ æ¸ˆã¿

### 5.2 Phase 2: èªè¨¼ãƒ»æ¨©é™ç®¡ç†ã€å®Œç’§ãƒ—ãƒ©ãƒ³ã€‘

**ç›®çš„**: ã‚»ã‚­ãƒ¥ã‚¢ãªèªè¨¼ + å°†æ¥ã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œ

```
â–¡ 2-1. Supabase Authå°å…¥ï¼ˆGoogle OAuthé€£æºï¼‰
       - Supabase Authï¼ˆGoogle Providerï¼‰ã‚’ä½¿ç”¨
       - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚’Supabaseã«å§”è­²
       - è¤‡æ•°ç·¨é›†è€…ã«å¯¾å¿œå¯èƒ½ãªè¨­è¨ˆ

â–¡ 2-2. ç·¨é›†è€…ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
       - org_chart_editors ãƒ†ãƒ¼ãƒ–ãƒ«æ–°è¨­
       - organization_id, email, role ã§ç®¡ç†
       - å°†æ¥ã®BPaaSå¯¾å¿œï¼ˆPhase 4ï¼‰ã‚’è¦‹æ®ãˆãŸè¨­è¨ˆ

â–¡ 2-3. æ¨©é™åˆ¶å¾¡
       - org_chart_editors ã«ç™»éŒ² â†’ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰
       - æœªç™»éŒ² â†’ é–²è¦§ãƒ¢ãƒ¼ãƒ‰
       - æœªãƒ­ã‚°ã‚¤ãƒ³ â†’ é–²è¦§ãƒ¢ãƒ¼ãƒ‰

â–¡ 2-4. UIå¤‰æ›´
       - ãƒ˜ãƒƒãƒ€ãƒ¼ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±è¡¨ç¤º
       - é–²è¦§ãƒ¢ãƒ¼ãƒ‰æ™‚ã¯ç·¨é›†ãƒœã‚¿ãƒ³éè¡¨ç¤º
       - ãƒ­ã‚°ã‚¤ãƒ³ä¿ƒé€²ãƒãƒŠãƒ¼ï¼ˆå¿…è¦æ™‚ï¼‰
```

**Supabaseãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ**:
```sql
-- ç·¨é›†è€…ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆPhase 4å¯¾å¿œï¼‰
CREATE TABLE org_chart_editors (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    organization_id VARCHAR(50) NOT NULL DEFAULT 'org_soulsyncs',
    email VARCHAR(255) NOT NULL,
    role VARCHAR(20) DEFAULT 'editor',  -- 'admin', 'editor', 'viewer'
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(organization_id, email)
);

-- åˆæœŸãƒ‡ãƒ¼ã‚¿
INSERT INTO org_chart_editors (email, role) VALUES
    ('info@soulsyncs.jp', 'admin'),
    ('kazu@soulsyncs.jp', 'admin');
```

**æŠ€è¡“è©³ç´°**:
```javascript
// Supabase Auth
import { createClient } from '@supabase/supabase-js'

const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY)

async function signInWithGoogle() {
    const { data, error } = await supabase.auth.signInWithOAuth({
        provider: 'google'
    })
}

async function checkEditPermission(email) {
    const { data } = await supabase
        .from('org_chart_editors')
        .select('role')
        .eq('email', email)
        .single()

    return data?.role === 'admin' || data?.role === 'editor'
}
```

### 5.3 Phase 3: ãƒ„ãƒªãƒ¼è¡¨ç¤ºæ”¹å–„

**ç›®çš„**: çµ„ç¹”éšå±¤ã¨å½¹è·ãŒä¸€ç›®ã§åˆ†ã‹ã‚‹ã‚ˆã†ã«

```
â–¡ 3-1. å½¹è·é †ã‚½ãƒ¼ãƒˆ
       - å„éƒ¨ç½²å†…ã§å½¹è·ãƒ¬ãƒ™ãƒ«ï¼ˆrole.levelï¼‰æ˜‡é †ã«è¡¨ç¤º
       - éƒ¨é•·(level 2) â†’ èª²é•·(level 3) â†’ ãƒªãƒ¼ãƒ€ãƒ¼(level 4) â†’ ä¸€èˆ¬(level 6)
       - å½¹è·æœªè¨­å®šè€…ã¯æœ€ä¸‹ä½ã«è¡¨ç¤º

â–¡ 3-2. å½¹è·åè¡¨ç¤º
       - ç¤¾å“¡åã®æ¨ªã«å½¹è·åã‚’ãƒãƒƒã‚¸è¡¨ç¤º
       - ä¾‹: ã€Œå±±ç”°å¤ªéƒ [éƒ¨é•·]ã€

â–¡ 3-3. å…¼å‹™è€…è¡¨ç¤º
       - å…¼å‹™è€…ã«ã¯ã€Œå…¼ã€ãƒãƒƒã‚¸ã‚’è¡¨ç¤º
       - ä¸»æ‰€å±ã¨å…¼å‹™ã®åŒºåˆ¥ãŒè¦–è¦šçš„ã«åˆ†ã‹ã‚‹
       - è‰²åˆ†ã‘: ä¸»æ‰€å±=é»’ã€å…¼å‹™=ã‚°ãƒ¬ãƒ¼

â–¡ 3-4. æœªè¨­å®šãƒã‚¤ãƒ©ã‚¤ãƒˆ
       - role_idæœªè¨­å®š â†’ é»„è‰²èƒŒæ™¯ + âš ï¸ã‚¢ã‚¤ã‚³ãƒ³
       - chatwork_account_idæœªè¨­å®š â†’ é»„è‰²èƒŒæ™¯ + âš ï¸ã‚¢ã‚¤ã‚³ãƒ³
       - ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã§ä½•ãŒæœªè¨­å®šã‹è¡¨ç¤º
```

**è¡¨ç¤ºã‚¤ãƒ¡ãƒ¼ã‚¸**:
```
å–¶æ¥­éƒ¨
â”œâ”€â”€ å±±ç”°å¤ªéƒ [éƒ¨é•·]           â† level 2
â”œâ”€â”€ ä½è—¤èŠ±å­ [èª²é•·]           â† level 3
â”œâ”€â”€ éˆ´æœ¨ä¸€éƒ [ãƒªãƒ¼ãƒ€ãƒ¼]       â† level 4
â”œâ”€â”€ ç”°ä¸­æ¬¡éƒ âš ï¸               â† å½¹è·æœªè¨­å®šï¼ˆãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰
â””â”€â”€ é«˜æ©‹ä¸‰éƒ [ä¸€èˆ¬] [å…¼]      â† å…¼å‹™è€…
```

### 5.4 Phase 4: ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—å¼·åŒ–

**ç›®çš„**: ç›´æ„Ÿçš„ãªçµ„ç¹”ç·¨é›†

```
â–¡ 4-1. ç¤¾å“¡ã®éƒ¨ç½²é–“ç§»å‹•
       - ç¤¾å“¡ã‚«ãƒ¼ãƒ‰ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦åˆ¥éƒ¨ç½²ã«ãƒ‰ãƒ­ãƒƒãƒ—
       - ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
       - å…¼å‹™è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆShift+ãƒ‰ãƒ­ãƒƒãƒ—ï¼‰

â–¡ 4-2. ç¤¾å“¡ã®ä¸¦ã³é †å¤‰æ›´
       - åŒä¸€éƒ¨ç½²å†…ã§ã®ä¸Šä¸‹å…¥ã‚Œæ›¿ãˆ
       - department_order ã‚«ãƒ©ãƒ ã‚’æ›´æ–°

â–¡ 4-3. éƒ¨ç½²ã®éšå±¤å¤‰æ›´
       - éƒ¨ç½²è‡ªä½“ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦è¦ªéƒ¨ç½²ã‚’å¤‰æ›´
       - å­éƒ¨ç½²ã‚‚ä¸€ç·’ã«ç§»å‹•

â–¡ 4-4. ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«
       - ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã®è¦ç´ ã‚’åŠé€æ˜åŒ–
       - ãƒ‰ãƒ­ãƒƒãƒ—å¯èƒ½ã‚¨ãƒªã‚¢ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
       - ä¸å¯ã‚¨ãƒªã‚¢ã¯Ã—ãƒãƒ¼ã‚¯è¡¨ç¤º
```

**æŠ€è¡“è©³ç´°**:
```javascript
// HTML5 Drag and Drop API
empItem.draggable = viewMode === 'edit';  // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã®ã¿

empItem.addEventListener('dragstart', (e) => {
    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('application/json', JSON.stringify({
        type: 'employee',
        id: emp.id,
        shiftKey: e.shiftKey  // å…¼å‹™è¿½åŠ ãƒ¢ãƒ¼ãƒ‰
    }));
});

deptBox.addEventListener('drop', async (e) => {
    const data = JSON.parse(e.dataTransfer.getData('application/json'));
    if (data.shiftKey) {
        await addKenmuToDepartment(data.id, dept.id);  // å…¼å‹™è¿½åŠ 
    } else {
        await moveEmployeeToDepartment(data.id, dept.id);  // ç§»å‹•
    }
});
```

### 5.5 Phase 5: ç›£æŸ»ãƒ»å±¥æ­´ç®¡ç†ã€å®Œç’§ãƒ—ãƒ©ãƒ³è¿½åŠ ã€‘

**ç›®çš„**: 10ã®é‰„å‰‡æº–æ‹  + å¤‰æ›´ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½

```
â–¡ 5-1. ç›£æŸ»ãƒ­ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«
       - èª°ãŒã€ã„ã¤ã€ä½•ã‚’å¤‰æ›´ã—ãŸã‹è¨˜éŒ²
       - 10ã®é‰„å‰‡ã€Œæ©Ÿå¯†æƒ…å ±ã‚¢ã‚¯ã‚»ã‚¹ã¯å…¨ã¦è¨˜éŒ²ã€æº–æ‹ 
       - å°†æ¥ã®BPaaSç›£æŸ»å¯¾å¿œ

â–¡ 5-2. å¤‰æ›´å±¥æ­´ã®å¼·åŒ–
       - æ—¢å­˜change_historyãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ‹¡å¼µ
       - before/after ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä¿å­˜
       - å·®åˆ†è¡¨ç¤ºæ©Ÿèƒ½

â–¡ 5-3. ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
       - ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§å¤‰æ›´ã‚’å…ƒã«æˆ»ã›ã‚‹
       - è¤‡æ•°å¤‰æ›´ã®ä¸€æ‹¬ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
       - ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å‰ã®ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
```

**Supabaseãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ**:
```sql
-- ç›£æŸ»ãƒ­ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ10ã®é‰„å‰‡æº–æ‹ ï¼‰
CREATE TABLE org_chart_audit_logs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    organization_id VARCHAR(50) NOT NULL DEFAULT 'org_soulsyncs',
    user_email VARCHAR(255) NOT NULL,
    action VARCHAR(50) NOT NULL,  -- 'create', 'update', 'delete', 'view'
    target_type VARCHAR(50) NOT NULL,  -- 'employee', 'department'
    target_id UUID,
    before_data JSONB,
    after_data JSONB,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_audit_logs_org ON org_chart_audit_logs(organization_id);
CREATE INDEX idx_audit_logs_created ON org_chart_audit_logs(created_at DESC);
```

### 5.6 Phase 6: å“è³ªå‘ä¸Šãƒ»UXæ”¹å–„ã€å®Œç’§ãƒ—ãƒ©ãƒ³ã€‘

```
â–¡ 6-1. è¨­å®šçŠ¶æ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
       - è¨­å®šå®Œäº†ç‡ï¼ˆrole_id, chatwork_account_idï¼‰
       - æœªè¨­å®šè€…ä¸€è¦§
       - ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ç·¨é›†ç”»é¢ã¸

â–¡ 6-2. CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆæ”¹å–„
       - ChatWork IDåˆ—ã‚’è¿½åŠ 
       - role_idåˆ—ã‚’è¿½åŠ 
       - ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½

â–¡ 6-3. ä¸€æ‹¬ç·¨é›†æ©Ÿèƒ½
       - è¤‡æ•°ç¤¾å“¡ã‚’é¸æŠ
       - éƒ¨ç½²ä¸€æ‹¬å¤‰æ›´
       - role_idä¸€æ‹¬è¨­å®š

â–¡ 6-4. åŒæœŸå·®åˆ†ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
       - ã‚½ã‚¦ãƒ«ãã‚“åŒæœŸå‰ã«å·®åˆ†ã‚’è¡¨ç¤º
       - è¿½åŠ /æ›´æ–°/å‰Šé™¤ã®ä»¶æ•°
       - è©³ç´°ãªå¤‰æ›´å†…å®¹ç¢ºèª

â–¡ 6-5. PDF/Excelã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
       - çµ„ç¹”å›³ã‚’PDFã§å‡ºåŠ›
       - ç¤¾å“¡ä¸€è¦§ã‚’Excelã§å‡ºåŠ›
       - éƒ¨ç½²åˆ¥ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

â–¡ 6-6. ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰
       - ã‚¹ãƒãƒ›ã§ã®é–²è¦§æœ€é©åŒ–
       - ã‚¿ãƒƒãƒæ“ä½œå¯¾å¿œ
       - æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ”¹å–„
```

### 5.7 Phase 7: ã‚³ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ”¹å–„ã€å®Œç’§ãƒ—ãƒ©ãƒ³è¿½åŠ ã€‘

**ç›®çš„**: ä¿å®ˆæ€§å‘ä¸Š + å°†æ¥ã®æ©Ÿèƒ½æ‹¡å¼µã«å‚™ãˆã‚‹

```
â–¡ 7-1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²
       ç¾åœ¨: app.js (3,700è¡Œã®å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«)

       åˆ†å‰²å¾Œ:
       js/
       â”œâ”€â”€ app.js           (ãƒ¡ã‚¤ãƒ³: 200è¡Œ)
       â”œâ”€â”€ auth.js          (èªè¨¼: 300è¡Œ)
       â”œâ”€â”€ tree-view.js     (ãƒ„ãƒªãƒ¼è¡¨ç¤º: 500è¡Œ)
       â”œâ”€â”€ card-view.js     (ã‚«ãƒ¼ãƒ‰è¡¨ç¤º: 400è¡Œ)
       â”œâ”€â”€ drag-drop.js     (ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—: 400è¡Œ)
       â”œâ”€â”€ sync.js          (ã‚½ã‚¦ãƒ«ãã‚“åŒæœŸ: 300è¡Œ)
       â”œâ”€â”€ audit.js         (ç›£æŸ»ãƒ­ã‚°: 200è¡Œ)
       â”œâ”€â”€ export.js        (ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ: 300è¡Œ)
       â””â”€â”€ utils.js         (å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£: 300è¡Œ)

â–¡ 7-2. ES ModulesåŒ–
       - import/exportæ§‹æ–‡ã‚’ä½¿ç”¨
       - ä¾å­˜é–¢ä¿‚ã®æ˜ç¢ºåŒ–
       - ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã®å‘ä¸Š

â–¡ 7-3. å®šæ•°ãƒ»è¨­å®šã®å¤–éƒ¨åŒ–
       - config.js ã«è¨­å®šå€¤ã‚’é›†ç´„
       - ç’°å¢ƒã”ã¨ã®è¨­å®šåˆ‡ã‚Šæ›¿ãˆå¯èƒ½ã«
```

### 5.8 å®Ÿè£…å„ªå…ˆé †ä½ã€å®Œç’§ãƒ—ãƒ©ãƒ³ã€‘

| é †ä½ | Phase | æ©Ÿèƒ½ | æ‰€è¦æ™‚é–“ | ç†ç”± |
|------|-------|------|----------|------|
| 1 | 2 | Supabase Auth | 4æ™‚é–“ | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æœ€å„ªå…ˆ |
| 2 | 3 | ãƒ„ãƒªãƒ¼è¡¨ç¤ºæ”¹å–„ | 4æ™‚é–“ | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æœ›ã®ä¸­å¿ƒ |
| 3 | 4 | ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ— | 4æ™‚é–“ | UXå‘ä¸Š |
| 4 | 5 | ç›£æŸ»ãƒ»å±¥æ­´ç®¡ç† | 6æ™‚é–“ | 10ã®é‰„å‰‡æº–æ‹  |
| 5 | 6 | å“è³ªå‘ä¸Šãƒ»UX | 8æ™‚é–“ | é‹ç”¨åŠ¹ç‡åŒ– |
| 6 | 7 | ã‚³ãƒ¼ãƒ‰åˆ†å‰² | 4æ™‚é–“ | ä¿å®ˆæ€§å‘ä¸Š |
| **åˆè¨ˆ** | | | **30æ™‚é–“** | **ç´„1-2é€±é–“** |

### 5.9 ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚³ã‚¹ãƒˆ

| é …ç›® | æœˆé¡ | å‚™è€ƒ |
|------|------|------|
| Supabase | Â¥0 | ç„¡æ–™æ å†…ï¼ˆ500MBï¼‰ |
| Supabase Auth | Â¥0 | ç„¡æ–™æ å†… |
| APIä½¿ç”¨æ–™ | Â¥0 | ç„¡æ–™æ å†… |
| **åˆè¨ˆ** | **Â¥0/æœˆ** | Phase 4ã§BPaaSå±•é–‹æ™‚ã¯Â¥3,800/æœˆ |

---

## 6. ãƒ†ã‚¹ãƒˆè¨ˆç”»

### 6.1 æ‰‹å‹•ãƒ†ã‚¹ãƒˆé …ç›®

**Phase 1ï¼ˆå®Œäº†æ¸ˆã¿ï¼‰**
| # | ãƒ†ã‚¹ãƒˆé …ç›® | æœŸå¾…çµæœ | çŠ¶æ…‹ |
|---|-----------|----------|------|
| 1 | ç¤¾å“¡è¿½åŠ ï¼ˆChatWork IDå…¥åŠ›ï¼‰ | Supabaseã«ä¿å­˜ | âœ… |
| 2 | ç¤¾å“¡ç·¨é›†ï¼ˆChatWork IDæ›´æ–°ï¼‰ | æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ç¶­æŒ | âœ… |
| 3 | ã‚½ã‚¦ãƒ«ãã‚“åŒæœŸ | Cloud SQLã«åæ˜  | âœ… |

**Phase 2ï¼ˆèªè¨¼ï¼‰**
| # | ãƒ†ã‚¹ãƒˆé …ç›® | æœŸå¾…çµæœ |
|---|-----------|----------|
| 4 | info@soulsyncs.jpã§ãƒ­ã‚°ã‚¤ãƒ³ | ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«ãªã‚‹ |
| 5 | ä»–ã®Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ | é–²è¦§ãƒ¢ãƒ¼ãƒ‰ã«ãªã‚‹ |
| 6 | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ | é–²è¦§ãƒ¢ãƒ¼ãƒ‰ã«æˆ»ã‚‹ |
| 7 | æœªãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ | é–²è¦§ãƒ¢ãƒ¼ãƒ‰ã€ç·¨é›†ãƒœã‚¿ãƒ³éè¡¨ç¤º |

**Phase 3ï¼ˆãƒ„ãƒªãƒ¼è¡¨ç¤ºï¼‰**
| # | ãƒ†ã‚¹ãƒˆé …ç›® | æœŸå¾…çµæœ |
|---|-----------|----------|
| 8 | ãƒ„ãƒªãƒ¼è¡¨ç¤ºã§å½¹è·é † | éƒ¨é•·â†’èª²é•·â†’ãƒªãƒ¼ãƒ€ãƒ¼â†’ä¸€èˆ¬ã®é † |
| 9 | å½¹è·åãƒãƒƒã‚¸è¡¨ç¤º | åå‰ã®æ¨ªã«[éƒ¨é•·]ç­‰ |
| 10 | å…¼å‹™è€…è¡¨ç¤º | [å…¼]ãƒãƒƒã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| 11 | æœªè¨­å®šãƒã‚¤ãƒ©ã‚¤ãƒˆ | âš ï¸ã‚¢ã‚¤ã‚³ãƒ³+é»„è‰²èƒŒæ™¯ |

**Phase 4ï¼ˆãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ï¼‰**
| # | ãƒ†ã‚¹ãƒˆé …ç›® | æœŸå¾…çµæœ |
|---|-----------|----------|
| 12 | ç¤¾å“¡ã‚’åˆ¥éƒ¨ç½²ã«ãƒ‰ãƒ©ãƒƒã‚° | ç¢ºèªå¾Œã«ç§»å‹•ã•ã‚Œã‚‹ |
| 13 | Shift+ãƒ‰ãƒ­ãƒƒãƒ— | å…¼å‹™ã¨ã—ã¦è¿½åŠ ã•ã‚Œã‚‹ |
| 14 | é–²è¦§ãƒ¢ãƒ¼ãƒ‰ã§ãƒ‰ãƒ©ãƒƒã‚° | ãƒ‰ãƒ©ãƒƒã‚°ä¸å¯ |

**Phase 5ï¼ˆå“è³ªå‘ä¸Šï¼‰**
| # | ãƒ†ã‚¹ãƒˆé …ç›® | æœŸå¾…çµæœ |
|---|-----------|----------|
| 15 | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º | è¨­å®šå®Œäº†ç‡ãŒæ­£ã—ã„ |
| 16 | CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ | ChatWork IDåˆ—ãŒåæ˜  |

### 6.2 E2Eãƒ†ã‚¹ãƒˆï¼ˆå°†æ¥ï¼‰

```javascript
// Playwrightç­‰ã§E2Eãƒ†ã‚¹ãƒˆã‚’è¿½åŠ äºˆå®š
test('ç¤¾å“¡è¿½åŠ ãƒ•ãƒ­ãƒ¼', async ({ page }) => {
  await page.goto('/');
  await page.click('text=ç¤¾å“¡ã‚’è¿½åŠ ');
  await page.fill('#empName', 'ãƒ†ã‚¹ãƒˆå¤ªéƒ');
  // ...
});
```

---

## 7. é‹ç”¨

### 7.1 ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

```bash
# 1. ãƒ­ãƒ¼ã‚«ãƒ«ã§ç¢ºèª
open index.html

# 2. Cloudflare Pagesã«ãƒ—ãƒƒã‚·ãƒ¥
git add .
git commit -m "fix: ChatWork IDå¯¾å¿œ"
git push origin main

# 3. è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆCloudflare Pagesï¼‰
# â†’ æ•°åˆ†ã§æœ¬ç•ªåæ˜ 
```

### 7.2 ç›£è¦–

| é …ç›® | æ–¹æ³• |
|------|------|
| Supabaseæ¥ç¶šã‚¨ãƒ©ãƒ¼ | ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèª |
| åŒæœŸã‚¨ãƒ©ãƒ¼ | showNotification()ã§è¡¨ç¤º |
| å¤‰æ›´å±¥æ­´ | change_historyãƒ†ãƒ¼ãƒ–ãƒ« |

---

## 8. é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [06_phase_3-5_org_hierarchy.md](06_phase_3-5_org_hierarchy.md) - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIè¨­è¨ˆ
- [PHASE_3-5_DETAILED_DESIGN.md](PHASE_3-5_DETAILED_DESIGN.md) - è©³ç´°è¨­è¨ˆ
- [03_database_design.md](03_database_design.md) - Cloud SQLã‚¹ã‚­ãƒ¼ãƒ

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å†…å®¹ |
|------|-----------|------|
| 2026-01-25 | 1.0.0 | åˆç‰ˆä½œæˆ |
